<!DOCTYPE html>
<html>
  <head>
    <title>The Musical Turing Test</title>
    <script src="https://unpkg.com/jspsych@8.2.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0"></script>
    <link href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
  <script>
  var jsPsych = initJsPsych();
  var timeline = [];

  var welcome = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "Welcome to the experiment. Press any key to begin."
  };
  timeline.push(welcome);

  var instructions = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: 
      `<p>In this experiment, you will hear a number of short 
      phrases from 4-part chorales with a harpsichord sound.</p>
<p>If you think that the music was composed by a <strong>human</strong>,
press <strong>H</strong>.
<p>If you think that the music was composed by <strong>Artificial Intelligence</strong>, 
press <strong>A</strong>.
    <p>Press any key to begin.</p>`
  };
  timeline.push(instructions);

  // Preload audio! 
  // https://www.jspsych.org/latest/plugins/audio-keyboard-response/
  var trial = {
    type: jsPsychAudioKeyboardResponse,
    stimulus: "audio/test.wav",
    choices: ["a", "h"],
    prompt: "Was this composed by a human (<strong>H</strong>) or by artificial intelligence (<strong>A</strong>)?",
    response_ends_trial: true
  };
  console.log(trial);
  timeline.push(trial);


  var bye = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "Thank you for your participation!"
  };
  timeline.push(bye);

  jsPsych.run(timeline);
  </script>
  </body>
  <script>
  </script>
</html>
